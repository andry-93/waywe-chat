<!doctype html>
<html>
<head>
	<meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>WayWe chat</title>
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <link rel="stylesheet" href="./style.css">
</head>
<body>
<h1>WayWe Admin</h1>
<ul id="messages"></ul>
<form action="">
    <input id="m" autocomplete="off" placeholder="Messange..." /><button>Send</button>
</form>

<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.3.0/socket.io.dev.js"></script>
<script>
    (function () {
        const socket = io();
        document.forms[0].addEventListener("submit", function(e){
            e.preventDefault();
            const img = "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wAARCAAtAC0DASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwDCooq/oXh/U/E+pR6fpFhcalfSZK29rGXcgdTgdh61/T0pKKcpOyR/OMYuTUYq7KFFeyeAf2Z/FuqeMNLtfEnhzVdO0OSXF3cxqoZEAJ469wB0PWsHUP2eviHZvcMvhHVJII2bDLEGJUHg4ByfwFeesywbm6aqxvo911v5+R3vL8WoKfspW9H0t/mec0U6SN4ZHjkRo5EJVlYYII6gj1ptekecFfUfwy8OaX4Z/Z31jxDp0dzbeJtU0K+ml1GO4KlEjujGEQD7uQqkkcnn2x8uV7T8HPiY9x4S8Q/D7XPEK6Vo+o6fJBpst4P9Gtp2feQ7AblVstz0HpzXhZxRq1cPH2e0ZJyWusVvtv3t5HtZTVp068vabuLSemje2+3a/mcY2ubfAyagPGuqt4kN8YW0ndLtFvsz5vmZxndxjrW5Y61/Z/jHwR/YfjbVtWa6a0kvlZpYfs07SAPEMn5gPUcGu6tfAfizS/CelDT9E8D/ABPsfPaygk060kuJYSAWPmSxrF8oz1djywqTWPAOrQap4fk8U6j4B+Http10t4dJtJFS6ADKzMQodnbAwAZMV50sZQk3G6+12fy5VHm09F5tnfHCV4pSs/s91+PNy6+vokUP2uvCOh6Prmn65pNnJZ3erX2oR3ytKXSSSF4x5ij+HcZGyBx0/H5+r0T45fFa9+KnjS8uTfTXOh21xKNLhlUL5UTEDIAAPzbVPPPQdq87r2Mqo1qGCp06795L166LXstDyczq0q2MqVKK91v/AId/N6hRRRXrHmG3pfjjxHoemyadpviDVNP0+Riz2treyRRMSACSisAScDt2rFZi7FmJZicknkmkoqIwjFtxVmy5TlJJSd0goooqyD//2Q==";
            socket.emit('chat message', {user: 'admin', msg: document.getElementById('m').value, img: img});
            document.getElementById("m").value = '';
            return false;
        })
        socket.on('chat message', function(msg){
            const messages = document.getElementById('messages');
            const list = document.createElement('li')
            list.innerHTML = `${msg.user}: ${msg.msg}`;
            messages.append(list);
        });
    })();
</script>
</body>
</html>
